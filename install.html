<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>embtextf: Installation and Use</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">embtextf
   &#160;<span id="projectnumber">20130407</span>
   </div>
   <div id="projectbrief">Embedded System Text Formatting</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installation and Use </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#install_config">Configuration Options</a></li>
<li class="level1"><a href="#install_target">Installation for Specific Platforms</a><ul><li class="level2"><a href="#install_target_mspgcc">Installation using mspgcc</a></li>
<li class="level2"><a href="#install_target_efm32">Installation for Energy Micro Devices</a></li>
<li class="level2"><a href="#install_target_ccs">Installation using Code Composer Studio</a></li>
</ul>
</li>
<li class="level1"><a href="#install_pkgconfig">pkg-config support from embtextf</a></li>
</ul>
</div>
<div class="textblock"><p>embtextf uses the <a href="http://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.69/html_node/The-GNU-Build-System.html">GNU Build System</a> to simplify configuration, compilation, library building, and installation. The general process is:</p>
<div class="fragment"><div class="line">./configure --host=target --prefix=install-path</div>
<div class="line">make</div>
<div class="line">make install</div>
</div><!-- fragment --><p>Most users of embtextf will want to cross-compile it for an embedded system, which is indicated by using the <code>&ndash;host</code> flag to <code>configure</code> to tell it to cross-compile. Be aware that with most versions of autoconf released since the year 2000 you will get the following message:</p>
<pre class="fragment">configure: WARNING: if you wanted to set the --build type, don't use --host.
    If a cross compiler is detected then cross compile mode will be used
</pre><p>There is nothing wrong here except the expectations of the maintainers and most users of autoconf. You don't want to set the <code>&ndash;build</code> type, you do want to cross-compile, and you did exactly what you were supposed to do. Ignore the warning.</p>
<p>You can run:</p>
<div class="fragment"><div class="line">./configure --help</div>
</div><!-- fragment --><p>to see what the various options mean and how you can influence the configuration and compilation process. In particular, there are options to disable features such as support for <code>long long</code> types. See &lt;<a class="el" href="config_8h.html" title="Build-time configuration options.">embtextf/config.h</a>&gt; for descriptions of features that can be enabled or disabled based on specific needs.</p>
<h1><a class="anchor" id="install_config"></a>
Configuration Options</h1>
<p>By default, all features of embtextf are enabled, but in some cases the features may be unnecessary and support for them might increase the size of the library. As an example, the following turns off <a class="el" href="uprintf_8h.html#adcc1a1b08e8d172b8d30523d76b53d6f">embtextf_vuprintf()</a> support for 64-bit values (<a class="el" href="config_8h.html#ab6a156659793c761893bc3d9bfd8dea7">EMBTEXTF_ENABLE_VUPRINTF_LONGLONG</a>) and format precision (<a class="el" href="config_8h.html#a9a71904acf8f497edec3bcceb81691ae">EMBTEXTF_ENABLE_VUPRINTF_PRECISION</a>) on the MSP430, resulting in a significantly smaller library:</p>
<div class="fragment"><div class="line">./configure \</div>
<div class="line">   --host=msp430 --prefix=/usr/local/mspgcc \</div>
<div class="line">   --disable-vuprintf-longlong \</div>
<div class="line">   --disable-vuprintf-precision</div>
</div><!-- fragment --><h1><a class="anchor" id="install_target"></a>
Installation for Specific Platforms</h1>
<h2><a class="anchor" id="install_target_mspgcc"></a>
Installation using mspgcc</h2>
<p>The following can be used to produce an embtextf installation suitable for use with <a href="http://www.ti.com/msp430">Texas Instruments MSP430</a> devices when using the <a href="http://sourceforge.net/projects/mspgcc/">mspgcc</a> GNU-based toolchain:</p>
<div class="fragment"><div class="line">./configure \</div>
<div class="line">   --host=msp430 --prefix=/usr/local/mspgcc</div>
</div><!-- fragment --><p>Because autoconf does not nicely support multilibs, if you want to control the <a href="http://sourceforge.net/apps/mediawiki/mspgcc/index.php?title=Gcc47:20-Bit_Design#memmodel">memory model</a> or take advantage of CPU/MPY capabilities of the target chip you'll need to do that through <code>TARGET_CFLAGS:</code> </p>
<div class="fragment"><div class="line">./configure \</div>
<div class="line">   --host=msp430 --prefix=/usr/local/mspgccx \</div>
<div class="line">   TARGET_CFLAGS=<span class="stringliteral">&#39;-mcpu=430x -mmemory-model=medium&#39;</span></div>
</div><!-- fragment --><p>Memory model information for an object file can be displayed using <code>msp430-readelf</code> with the <code>-A</code> flag:</p>
<pre class="fragment">llc% msp430-readelf -A /usr/local/mspgccx/lib/libembtextf.a
File: /tmp/msp430x/lib/libembtextf.a(vuprintf.o)
Attribute Section: gnu
File Attributes
  Tag_GNU_MSP430_CPUX_TARGET: c20,sr20</pre><h2><a class="anchor" id="install_target_efm32"></a>
Installation for Energy Micro Devices</h2>
<p>The following can be used to produce an embtextf installation suitable for use with <a href="http://www.energymicro.com/">Energy Micro</a> and probably other Cortex-M3 devices when using the <a href="http://www.mentor.com/embedded-software/codesourcery">CodeSourcery</a> toolchain:</p>
<div class="fragment"><div class="line">./configure \</div>
<div class="line">   --host=arm-none-eabi --prefix=/usr/local/efm32 \</div>
<div class="line">   TARGET_CFLAGS=<span class="stringliteral">&#39;-mcpu=cortex-m3 -mthumb -mfix-cortex-m3-ldrd&#39;</span></div>
</div><!-- fragment --><h2><a class="anchor" id="install_target_ccs"></a>
Installation using Code Composer Studio</h2>
<p>The following can be used to produce an embtextf installation built with the <a href="http://www.ti.com/ccs">Texas Instruments Code Composer Studio</a> compiler toolchain:</p>
<div class="fragment"><div class="line">./configure \</div>
<div class="line">   CCS_INSTALL_ROOT=/usr/local/ccs-5.2.1/ccsv5 \</div>
<div class="line">   --with-ccs-target=msp430 \</div>
<div class="line">   --prefix=/usr/local/ccs-msp430 </div>
</div><!-- fragment --><p>The <code>&ndash;with-ccs-target</code> option should specify the target platform, such as <code>msp430</code> or <code>tms470</code>. The installation root of the TI compiler toolchain should be specified in the <code>CCS_INSTALL_ROOT</code> environment variable or on the configure command line.</p>
<h1><a class="anchor" id="install_pkgconfig"></a>
pkg-config support from embtextf</h1>
<p>embtextf constructs and installs a <a href="http://www.freedesktop.org/wiki/Software/pkg-config">pkg-config</a> file that can be used to obtain the flags necessary to build applications to link with an installed embtextf system. Use the tool this way:</p>
<div class="fragment"><div class="line">PKG_CONFIG_PATH=/usr/local/efm32/lib/pkgconfig pkg-config --cflags --libs embtextf</div>
</div><!-- fragment --><p>which will produce output like: </p>
<pre class="fragment">-mcpu=cortex-m3 -mthumb -mfix-cortex-m3-ldrd -g -O2 -Os -I/usr/local/efm32/include  -L/usr/local/efm32/lib -lembtextf
</pre><p>pkg-config assumes you combine CPPFLAGS into CFLAGS (and LDFLAGS into LIBS), so though you can obtain the include path using <code>&ndash;cflags-only-I</code> there is no general way to extract only the specific pieces that belong in CFLAGS and LDFLAGS.</p>
<p>pkg-config also does not have a concept of optional libraries within a package, so for simplicity <code>-lembtextf-libc</code> is excluded from LIBS and must be added if the libc wrappers enabled by <a class="el" href="config_8h.html#af9831e2f625cb8cae1929d48758a0fbb">EMBTEXTF_PROVIDE_LIBC</a> are desired. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 7 2013 10:59:01 for embtextf by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
